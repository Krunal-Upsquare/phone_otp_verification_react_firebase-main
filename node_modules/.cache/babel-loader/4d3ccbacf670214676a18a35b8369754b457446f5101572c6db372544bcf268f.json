{"ast":null,"code":"import{BsFillShieldLockFill,BsTelephoneFill}from\"react-icons/bs\";import{CgSpinner}from\"react-icons/cg\";import OtpInput from\"otp-input-react\";import{useState}from\"react\";import PhoneInput from\"react-phone-input-2\";import\"react-phone-input-2/lib/style.css\";import{auth}from\"./firebase.config\";import{RecaptchaVerifier,signInWithPhoneNumber}from\"firebase/auth\";import{toast,Toaster}from\"react-hot-toast\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const App=()=>{const[otp,setOtp]=useState(\"\");const[ph,setPh]=useState(\"\");const[loading,setLoading]=useState(false);const[showOTP,setShowOTP]=useState(false);const[user,setUser]=useState(null);function onCaptchVerify(){console.log(\"captcha\");if(!window.recaptchaVerifier){window.recaptchaVerifier=new RecaptchaVerifier(\"recaptcha-container\",{size:\"invisible\",callback:response=>{onSignup();},\"expired-callback\":()=>{}},auth);}}function onSignup(){setLoading(true);onCaptchVerify();const appVerifier=window.recaptchaVerifier;const formatPh=\"+\"+ph;console.log(formatPh);signInWithPhoneNumber(auth,formatPh,appVerifier).then(confirmationResult=>{window.confirmationResult=confirmationResult;setLoading(false);setShowOTP(true);console.log(confirmationResult);toast.success(\"OTP sended successfully!\");}).catch(error=>{console.log(error);setLoading(false);});}function onOTPVerify(){setLoading(true);window.confirmationResult.confirm(otp).then(async res=>{console.log(res);setUser(res.user);setLoading(false);}).catch(err=>{console.log(err);setLoading(false);});}return/*#__PURE__*/_jsx(\"section\",{className:\"bg-emerald-500 flex items-center justify-center h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Toaster,{toastOptions:{duration:4000}}),/*#__PURE__*/_jsx(\"div\",{id:\"recaptcha-container\"}),user?/*#__PURE__*/_jsx(\"h2\",{className:\"text-center text-white font-medium text-2xl\",children:\"\\uD83D\\uDC4DLogin Success\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"w-80 flex flex-col gap-4 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center leading-normal text-white font-medium text-3xl mb-6\",children:[\"Welcome to \",/*#__PURE__*/_jsx(\"br\",{}),\" CODE A PROGRAM\"]}),showOTP?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white text-emerald-500 w-fit mx-auto p-4 rounded-full\",children:/*#__PURE__*/_jsx(BsFillShieldLockFill,{size:30})}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"otp\",className:\"font-bold text-xl text-white text-center\",children:\"Enter your OTP\"}),/*#__PURE__*/_jsx(OtpInput,{value:otp,onChange:setOtp,OTPLength:6,otpType:\"number\",disabled:false,autoFocus:true,className:\"opt-container \"}),/*#__PURE__*/_jsxs(\"button\",{onClick:onOTPVerify,className:\"bg-emerald-600 w-full flex gap-1 items-center justify-center py-2.5 text-white rounded\",children:[loading&&/*#__PURE__*/_jsx(CgSpinner,{size:20,className:\"mt-1 animate-spin\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Verify OTP\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white text-emerald-500 w-fit mx-auto p-4 rounded-full\",children:/*#__PURE__*/_jsx(BsTelephoneFill,{size:30})}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",className:\"font-bold text-xl text-white text-center\",children:\"Verify your phone number\"}),/*#__PURE__*/_jsx(PhoneInput,{country:\"in\",value:ph,onChange:setPh}),/*#__PURE__*/_jsxs(\"button\",{onClick:onSignup,className:\"bg-emerald-600 w-full flex gap-1 items-center justify-center py-2.5 text-white rounded\",children:[loading&&/*#__PURE__*/_jsx(CgSpinner,{size:20,className:\"mt-1 animate-spin\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Send code via SMS\"})]})]})]})]})});};export default App;","map":{"version":3,"names":["BsFillShieldLockFill","BsTelephoneFill","CgSpinner","OtpInput","useState","PhoneInput","auth","RecaptchaVerifier","signInWithPhoneNumber","toast","Toaster","App","otp","setOtp","ph","setPh","loading","setLoading","showOTP","setShowOTP","user","setUser","onCaptchVerify","console","log","window","recaptchaVerifier","size","callback","response","onSignup","appVerifier","formatPh","then","confirmationResult","success","catch","error","onOTPVerify","confirm","res","err","duration"],"sources":["C:/Users/P21-0007/Downloads/phone_otp_verification_react_firebase-main/phone_otp_verification_react_firebase-main/src/App.js"],"sourcesContent":["import { BsFillShieldLockFill, BsTelephoneFill } from \"react-icons/bs\";\nimport { CgSpinner } from \"react-icons/cg\";\n\nimport OtpInput from \"otp-input-react\";\nimport { useState } from \"react\";\nimport PhoneInput from \"react-phone-input-2\";\nimport \"react-phone-input-2/lib/style.css\";\nimport { auth } from \"./firebase.config\";\nimport { RecaptchaVerifier, signInWithPhoneNumber } from \"firebase/auth\";\nimport { toast, Toaster } from \"react-hot-toast\";\n\nconst App = () => {\n  const [otp, setOtp] = useState(\"\");\n  const [ph, setPh] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [showOTP, setShowOTP] = useState(false);\n  const [user, setUser] = useState(null);\n\n  function onCaptchVerify() {\n    console.log(\"captcha\")\n    if (!window.recaptchaVerifier) {\n      window.recaptchaVerifier = new RecaptchaVerifier(\n        \"recaptcha-container\",\n        {\n          size: \"invisible\",\n          callback: (response) => {\n            onSignup();\n          },\n          \"expired-callback\": () => {},\n        },\n        auth\n      );\n    }\n  }\n\n  function onSignup() {\n    setLoading(true);\n    onCaptchVerify();\n\n    const appVerifier = window.recaptchaVerifier;\n\n    const formatPh = \"+\" + ph;\n    console.log(formatPh)\n    signInWithPhoneNumber(auth, formatPh, appVerifier)\n      .then((confirmationResult) => {\n        window.confirmationResult = confirmationResult;\n        setLoading(false);\n        setShowOTP(true);\n        console.log(confirmationResult)\n        toast.success(\"OTP sended successfully!\");\n      })\n      .catch((error) => {\n        console.log(error);\n        setLoading(false);\n      });\n  }\n\n  function onOTPVerify() {\n    setLoading(true);\n    window.confirmationResult\n      .confirm(otp)\n      .then(async (res) => {\n        console.log(res);\n        setUser(res.user);\n        setLoading(false);\n      })\n      .catch((err) => {\n        console.log(err);\n        setLoading(false);\n      });\n  }\n\n  return (\n    <section className=\"bg-emerald-500 flex items-center justify-center h-screen\">\n      <div>\n        <Toaster toastOptions={{ duration: 4000 }} />\n        <div id=\"recaptcha-container\"></div>\n        {user ? (\n          <h2 className=\"text-center text-white font-medium text-2xl\">\n            üëçLogin Success\n          </h2>\n        ) : (\n          <div className=\"w-80 flex flex-col gap-4 rounded-lg p-4\">\n            <h1 className=\"text-center leading-normal text-white font-medium text-3xl mb-6\">\n              Welcome to <br /> CODE A PROGRAM\n            </h1>\n            {showOTP ? (\n              <>\n                <div className=\"bg-white text-emerald-500 w-fit mx-auto p-4 rounded-full\">\n                  <BsFillShieldLockFill size={30} />\n                </div>\n                <label\n                  htmlFor=\"otp\"\n                  className=\"font-bold text-xl text-white text-center\"\n                >\n                  Enter your OTP\n                </label>\n                <OtpInput\n                  value={otp}\n                  onChange={setOtp}\n                  OTPLength={6}\n                  otpType=\"number\"\n                  disabled={false}\n                  autoFocus\n                  className=\"opt-container \"\n                ></OtpInput>\n                <button\n                  onClick={onOTPVerify}\n                  className=\"bg-emerald-600 w-full flex gap-1 items-center justify-center py-2.5 text-white rounded\"\n                >\n                  {loading && (\n                    <CgSpinner size={20} className=\"mt-1 animate-spin\" />\n                  )}\n                  <span>Verify OTP</span>\n                </button>\n              </>\n            ) : (\n              <>\n                <div className=\"bg-white text-emerald-500 w-fit mx-auto p-4 rounded-full\">\n                  <BsTelephoneFill size={30} />\n                </div>\n                <label\n                  htmlFor=\"\"\n                  className=\"font-bold text-xl text-white text-center\"\n                >\n                  Verify your phone number\n                </label>\n                <PhoneInput country={\"in\"} value={ph} onChange={setPh} />\n                <button\n                  onClick={onSignup}\n                  className=\"bg-emerald-600 w-full flex gap-1 items-center justify-center py-2.5 text-white rounded\"\n                >\n                  {loading && (\n                    <CgSpinner size={20} className=\"mt-1 animate-spin\" />\n                  )}\n                  <span>Send code via SMS</span>\n                </button>\n              </>\n            )}\n          </div>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}